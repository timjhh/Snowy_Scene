{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\timjh\\\\Documents\\\\GitHub\\\\Three.js-Example\\\\cube-notes\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport * as Tone from 'tone';\nimport React, { useState } from 'react';\nimport * as d3 from 'd3';\nimport Legend from './Legend.jsx';\nimport Cube from './Cube.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var options = {\n    note: 'B',\n    mode: \"Major\",\n    tempo: 90,\n    scale: ['A', 'B', 'C', 'D', 'E', 'F', 'G']\n  };\n  const [mode, setMode] = useState(options.mode);\n  const [note, setNote] = useState(options.note);\n  const [tempo, setTempo] = useState(options.tempo);\n  let [scale, setScale] = useState(options.scale); //const [play, setPlay] = useState(options.play);\n\n  const [anim, pAnimate] = useState(0);\n  const scaleRef = React.useRef(options.scale);\n  const startRef = React.useRef(null);\n  scaleRef.current = options.scale; // Define some music theory terms\n  // Starting at 'C0' and ending at 'G#9'\n\n  const min = 0;\n  const max = 9;\n  const modes = ['Major', 'Minor'];\n  const notes = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#']; // W - Whole step\n  // H - Half step\n  // 'Final' notes are omitted to avoid duplicates i.e. C major ends at B, not C\n  // Major scales follow the pattern of W-W-H-W-W-W-H\n\n  const major = [0, 2, 4, 5, 7, 9, 11]; // Minor scales follow the pattern of W-H-W-W-H-W-W\n\n  const minor = [0, 2, 3, 5, 7, 8, 10]; // On change, calculate a new scale with input values\n\n  function appOnChange() {\n    options.scale = [];\n    let arr = mode === \"Major\" ? major : minor;\n    let start = notes.indexOf(note);\n    arr.forEach(function (d) {\n      options.scale.push(notes[(d + start) % notes.length]);\n    }); //setScale(options.scale);\n\n    scaleRef.current = options.scale;\n  }\n\n  async function initAudio() {\n    await Tone.start();\n    console.log(\"Audio initialized\");\n    pAnimate();\n  }\n\n  let maxCubes = 10; // Continuous color schemes\n  //let colorC = (d) => d3.interpolateMagma( parseInt(d) / maxCubes );\n  //let colorC = (d) => d3.interpolateTurbo( parseInt(d) / maxCubes );\n  // Discrete color scheme\n\n  let colorC = d => d3.schemePaired[d % 10];\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"head\", {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Cube Notes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Cube, {\n        color: colorC,\n        maxCubes: maxCubes,\n        tone: Tone,\n        scaleRef: scaleRef,\n        animate: anim\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Legend, {\n        onChange: appOnChange(),\n        modes: modes,\n        mode: mode,\n        setMode: setMode,\n        note: note,\n        notes: notes,\n        setNote: setNote,\n        tempo: tempo,\n        setTempo: setTempo,\n        initAudio: initAudio,\n        startRef: startRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s(App, \"3Z4niKV2GT1O5WuUWcyoXCyc4ZU=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/timjh/Documents/GitHub/Three.js-Example/cube-notes/src/App.js"],"names":["Tone","React","useState","d3","Legend","Cube","App","options","note","mode","tempo","scale","setMode","setNote","setTempo","setScale","anim","pAnimate","scaleRef","useRef","startRef","current","min","max","modes","notes","major","minor","appOnChange","arr","start","indexOf","forEach","d","push","length","initAudio","console","log","maxCubes","colorC","schemePaired"],"mappings":"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","sourcesContent":["import './App.css';\r\nimport * as Tone from 'tone'\r\nimport React, { useState } from 'react';\r\nimport * as d3 from 'd3';\r\nimport Legend from './Legend.jsx';\r\nimport Cube from './Cube.jsx';\r\nfunction App() {\r\n\r\n\r\n  var options = {\r\n    note: 'B',\r\n    mode: \"Major\",\r\n    tempo: 90,\r\n    scale: ['A','B','C','D','E','F','G']\r\n  };\r\n\r\n\r\n  const [mode, setMode] = useState(options.mode);\r\n  const [note, setNote] = useState(options.note);\r\n  const [tempo, setTempo] = useState(options.tempo);\r\n  let [scale, setScale] = useState(options.scale);\r\n  //const [play, setPlay] = useState(options.play);\r\n  const [anim, pAnimate] = useState(0);\r\n\r\n\r\n  const scaleRef = React.useRef(options.scale);\r\n  const startRef = React.useRef(null);\r\n  scaleRef.current = options.scale;\r\n\r\n  // Define some music theory terms\r\n  // Starting at 'C0' and ending at 'G#9'\r\n  const min = 0;\r\n  const max = 9;\r\n\r\n  const modes = ['Major', 'Minor'];\r\n  const notes = ['A','A#','B','C','C#','D','D#','E','F','F#','G','G#'];\r\n\r\n  // W - Whole step\r\n  // H - Half step\r\n  // 'Final' notes are omitted to avoid duplicates i.e. C major ends at B, not C\r\n\r\n\r\n  // Major scales follow the pattern of W-W-H-W-W-W-H\r\n  const major = [0,2,4,5,7,9,11];\r\n\r\n  // Minor scales follow the pattern of W-H-W-W-H-W-W\r\n  const minor = [0,2,3,5,7,8,10]; \r\n\r\n  \r\n  // On change, calculate a new scale with input values\r\n  function appOnChange() {\r\n  options.scale = [];\r\n  let arr = (mode === \"Major\") ? major : minor;\r\n  let start = notes.indexOf(note);\r\n\r\n  arr.forEach(function(d) {\r\n\r\n    options.scale.push(notes[((d + start) % notes.length)]);\r\n     });\r\n  //setScale(options.scale);\r\n  scaleRef.current = options.scale;\r\n\r\n}\r\n\r\nasync function initAudio() {\r\n\r\n  await Tone.start();\r\n  console.log(\"Audio initialized\");\r\n  pAnimate();\r\n\r\n\r\n}\r\n\r\n  let maxCubes = 10;\r\n\r\n  // Continuous color schemes\r\n  //let colorC = (d) => d3.interpolateMagma( parseInt(d) / maxCubes );\r\n  //let colorC = (d) => d3.interpolateTurbo( parseInt(d) / maxCubes );\r\n\r\n  // Discrete color scheme\r\n  let colorC = (d) => d3.schemePaired[d % 10];\r\n\r\n  return (\r\n    <>\r\n    <head>\r\n\r\n      <title>Cube Notes</title>\r\n\r\n    </head>\r\n\r\n    <div className=\"App\">\r\n\r\n        <Cube \r\n          color={colorC}\r\n          maxCubes={maxCubes}\r\n          tone={Tone}\r\n          scaleRef={scaleRef}\r\n          animate={anim}\r\n        />\r\n\r\n        <Legend onChange = {appOnChange()}\r\n          modes={modes}\r\n          mode={mode}\r\n          setMode={setMode}\r\n          note={note}\r\n          notes={notes}\r\n          setNote={setNote}\r\n          tempo={tempo}\r\n          setTempo={setTempo}\r\n          initAudio={initAudio}\r\n          startRef={startRef}/>\r\n\r\n    </div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}