{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\timjh\\\\Documents\\\\GitHub\\\\Cube-Sounds\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport * as Tone from 'tone';\nimport React, { useState } from 'react';\nimport * as d3 from 'd3';\nimport Legend from './Legend.jsx';\nimport Cube from './Cube.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var options = {\n    note: 'D',\n    mode: \"Minor\",\n    tempo: 90,\n    scale: []\n  };\n\n  for (var i = 0; i < 100; i++) {\n    console.log(Math.floor(Math.random() * 100));\n  }\n\n  const [mode, setMode] = useState(options.mode);\n  const [note, setNote] = useState(options.note);\n  const [tempo, setTempo] = useState(options.tempo);\n  let [scale, setScale] = useState(options.scale); //const [play, setPlay] = useState(options.play);\n\n  const [anim, pAnimate] = useState(0);\n  const scaleRef = React.useRef(options.scale);\n  const startRef = React.useRef(null);\n  scaleRef.current = options.scale; // Define some music theory terms\n  // Starting at 'C0' and ending at 'G#9'\n\n  const min = 0;\n  const max = 9;\n  const modes = ['Major', 'Minor'];\n  const notes = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#']; // W - Whole step\n  // H - Half step\n  // 'Final' notes are omitted to avoid duplicates i.e. C major ends at B, not C\n  // Major scales follow the pattern of W-W-H-W-W-W-H\n\n  const major = [0, 2, 4, 5, 7, 9, 11]; // Minor scales follow the pattern of W-H-W-W-H-W-W\n\n  const minor = [0, 2, 3, 5, 7, 8, 10]; // On change, calculate a new scale with input values\n\n  function appOnChange() {\n    options.scale = [];\n    let arr = mode === \"Major\" ? major : minor;\n    let start = notes.indexOf(note);\n    arr.forEach(function (d) {\n      options.scale.push(notes[(d + start) % notes.length]);\n    }); //setScale(options.scale);\n\n    scaleRef.current = options.scale;\n  }\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  async function initAudio() {\n    await sleep(3000);\n    await Tone.start();\n    console.log(\"Audio initialized\");\n    pAnimate();\n  }\n\n  let maxCubes = 5; // Continuous color schemes\n  //let colorC = (d) => d3.interpolateMagma( parseInt(d) / maxCubes );\n  //let colorC = (d) => d3.interpolateTurbo( parseInt(d) / maxCubes );\n  // Discrete color scheme\n\n  let colorC = d => d3.schemePaired[d % 10];\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"head\", {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Cube Notes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Cube, {\n        color: colorC,\n        maxCubes: maxCubes,\n        tone: Tone,\n        scaleRef: scaleRef,\n        anim: anim,\n        start: start\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Legend, {\n        onChange: appOnChange(),\n        modes: modes,\n        mode: mode,\n        setMode: setMode,\n        note: note,\n        notes: notes,\n        setNote: setNote,\n        tempo: tempo,\n        setTempo: setTempo,\n        initAudio: initAudio,\n        startRef: startRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s(App, \"3Z4niKV2GT1O5WuUWcyoXCyc4ZU=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/timjh/Documents/GitHub/Cube-Sounds/src/App.js"],"names":["Tone","React","useState","d3","Legend","Cube","App","options","note","mode","tempo","scale","i","console","log","Math","floor","random","setMode","setNote","setTempo","setScale","anim","pAnimate","scaleRef","useRef","startRef","current","min","max","modes","notes","major","minor","appOnChange","arr","start","indexOf","forEach","d","push","length","sleep","ms","Promise","resolve","setTimeout","initAudio","maxCubes","colorC","schemePaired"],"mappings":"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","sourcesContent":["import './App.css';\r\nimport * as Tone from 'tone'\r\nimport React, { useState } from 'react';\r\nimport * as d3 from 'd3';\r\nimport Legend from './Legend.jsx';\r\nimport Cube from './Cube.jsx';\r\nfunction App() {\r\n\r\n\r\n  var options = {\r\n    note: 'D',\r\n    mode: \"Minor\",\r\n    tempo: 90,\r\n    scale: []\r\n  };\r\n  for(var i =0;i<100;i++) {\r\n      console.log(\r\nMath.floor(Math.random() * 100));\r\n  }\r\n\r\n\r\n  const [mode, setMode] = useState(options.mode);\r\n  const [note, setNote] = useState(options.note);\r\n  const [tempo, setTempo] = useState(options.tempo);\r\n  let [scale, setScale] = useState(options.scale);\r\n  //const [play, setPlay] = useState(options.play);\r\n  const [anim, pAnimate] = useState(0);\r\n\r\n\r\n  const scaleRef = React.useRef(options.scale);\r\n  const startRef = React.useRef(null);\r\n  scaleRef.current = options.scale;\r\n\r\n  // Define some music theory terms\r\n  // Starting at 'C0' and ending at 'G#9'\r\n  const min = 0;\r\n  const max = 9;\r\n\r\n  const modes = ['Major', 'Minor'];\r\n  const notes = ['A','A#','B','C','C#','D','D#','E','F','F#','G','G#'];\r\n\r\n  // W - Whole step\r\n  // H - Half step\r\n  // 'Final' notes are omitted to avoid duplicates i.e. C major ends at B, not C\r\n\r\n\r\n  // Major scales follow the pattern of W-W-H-W-W-W-H\r\n  const major = [0,2,4,5,7,9,11];\r\n\r\n  // Minor scales follow the pattern of W-H-W-W-H-W-W\r\n  const minor = [0,2,3,5,7,8,10]; \r\n\r\n  \r\n  // On change, calculate a new scale with input values\r\n  function appOnChange() {\r\n  options.scale = [];\r\n  let arr = (mode === \"Major\") ? major : minor;\r\n  let start = notes.indexOf(note);\r\n\r\n  arr.forEach(function(d) {\r\n\r\n    options.scale.push(notes[((d + start) % notes.length)]);\r\n     });\r\n  //setScale(options.scale);\r\n  scaleRef.current = options.scale;\r\n\r\n}\r\n\r\n\r\nfunction sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nasync function initAudio() {\r\n\r\n  await sleep(3000);\r\n  await Tone.start();\r\n  console.log(\"Audio initialized\");\r\n  pAnimate();\r\n\r\n\r\n}\r\n\r\n  let maxCubes = 5;\r\n\r\n  // Continuous color schemes\r\n  //let colorC = (d) => d3.interpolateMagma( parseInt(d) / maxCubes );\r\n  //let colorC = (d) => d3.interpolateTurbo( parseInt(d) / maxCubes );\r\n\r\n  // Discrete color scheme\r\n  let colorC = (d) => d3.schemePaired[d % 10];\r\n\r\n  return (\r\n    <>\r\n    <head>\r\n\r\n      <title>Cube Notes</title>\r\n\r\n    </head>\r\n\r\n    <div className=\"App\">\r\n\r\n        <Cube \r\n          color={colorC}\r\n          maxCubes={maxCubes}\r\n          tone={Tone}\r\n          scaleRef={scaleRef}\r\n          anim={anim}\r\n          start={start}\r\n        />\r\n\r\n        <Legend onChange = {appOnChange()}\r\n          modes={modes}\r\n          mode={mode}\r\n          setMode={setMode}\r\n          note={note}\r\n          notes={notes}\r\n          setNote={setNote}\r\n          tempo={tempo}\r\n          setTempo={setTempo}\r\n          initAudio={initAudio}\r\n          startRef={startRef}\r\n          />\r\n\r\n    </div>\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}